/** @license sf2synth.js 2013 - imaya / GREE Inc. [ https://github.com/gree/sf2synth.js ] The MIT License */(function() {'use strict';function k(c){throw c;}var m=void 0,n=!0,u=null,v=!1,w=this;function y(c,d){var a=c.split("."),b=w;!(a[0]in b)&&b.execScript&&b.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&d!==m?b[e]=d:b=b[e]?b[e]:b[e]={}};function z(c,d,a){this.d=c;this.destination=d;this.b=a;this.fa=a.channel;this.key=a.key;this.Ga=a.velocity;this.buffer=a.sample;this.playbackRate=a.basePlaybackRate;this.sampleRate=a.sampleRate;this.volume=a.volume;this.W=a.panpot;this.m=a.pitchBend;this.t=a.pitchBendSensitivity;this.oa=a.modEnvToPitch;this.u=a.reverb;this.startTime=c.currentTime;this.z=this.playbackRate}
z.prototype.noteOn=function(){var c=this.d,d=this.b,a=this.buffer,b,e,f,g=this.d.currentTime,h=g+d.volAttack,s=g+d.modAttack,l=h+d.volDecay,q=s+d.modDecay;f=d.loopStart/this.sampleRate;var p=d.loopEnd/this.sampleRate,t=d.start/this.sampleRate;e=d.reverb;a=a.subarray(0,a.length+d.end);b=this.ca=c.createBuffer(1,a.length,this.sampleRate);b.getChannelData(0).set(a);a=this.w=c.createBufferSource();a.buffer=b;a.loop=9!==this.fa;a.loopStart=f;a.loopEnd=p;B(this,this.m);b=c.createConvolver();f=window.atob("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");
for(var p=new Uint8Array(new ArrayBuffer(f.length)),r=0;r<f.length;r++)p[r]=f.charCodeAt(r);b.buffer=p;f=c.createGain();f.gain.value=e/127;b.connect(f);f.connect(this.destination);e=this.sa=c.createPanner();b=this.M=c.createGainNode();f=b.gain;c=this.filter=c.createBiquadFilter();c.type=c.LOWPASS;e.panningModel=0;e.setPosition(Math.sin(this.W*Math.PI/2),0,Math.cos(this.W*Math.PI/2));f.setValueAtTime(0,g);f.linearRampToValueAtTime(this.volume*(1-d.volSustain),l);f.linearRampToValueAtTime(this.volume*
Math.pow(this.Ga/127,2),h);c.Q.setValueAtTime(d.initialFilterQ*Math.pow(10,200),g);h=440*Math.pow(2,(d.initialFilterFc-6900)/1200);l=440*Math.pow(2,(d.initialFilterFc+d.modEnvToFilterFc-6900)/1200);d=h+(l-h)*(1-d.modSustain);c.frequency.setValueAtTime(h,g);c.frequency.linearRampToValueAtTime(l,s);c.frequency.linearRampToValueAtTime(d,q);a.connect(c);c.connect(e);e.connect(b);b.connect(this.destination);a.start(0,t)};
z.prototype.noteOff=function(){var c=this.b,d=this.w,a=this.M,b=this.d.currentTime,e=b+c.volRelease,b=b+c.modRelease;this.ca&&(a.gain.cancelScheduledValues(0),a.gain.linearRampToValueAtTime(0,e),d.playbackRate.cancelScheduledValues(0),d.playbackRate.linearRampToValueAtTime(this.z,b),d.loop=v,d.stop(e),setTimeout(function(a){return function(){a.w.disconnect(0);a.sa.disconnect(0);a.M.disconnect(0)}}(this),1E3*c.volRelease))};
function B(c,d){c.z=c.playbackRate*Math.pow(Math.pow(2,1/12),c.t*(d/(0>d?8192:8191))*c.b.scaleTuning);var a=c.w.playbackRate,b=c.z,e=c.startTime,f=c.b,g=e+f.modAttack,h=g+f.modDecay,s=b*Math.pow(Math.pow(2,1/12),c.oa*c.b.scaleTuning);a.cancelScheduledValues(0);a.setValueAtTime(b,e);a.linearRampToValueAtTime(s,g);a.linearRampToValueAtTime(b+(s-b)*(1-f.modSustain),h)};function D(c,d){d=d||{};this.input=c;this.k=d.index||0;this.length=d.length||c.length-this.k;this.offset=this.k;this.padding=d.padding!==m?d.padding:n;this.ea=d.bigEndian!==m?d.bigEndian:v}function ga(c,d,a){this.type=c;this.size=d;this.offset=a}
D.prototype.parse=function(){var c=this.length+this.offset;for(this.h=[];this.k<c;){var d=this.input,a=this.k,b=m;this.h.push(new ga(String.fromCharCode(d[a++],d[a++],d[a++],d[a++]),b=this.ea?(d[a++]<<24|d[a++]<<16|d[a++]<<8|d[a++])>>>0:(d[a++]|d[a++]<<8|d[a++]<<16|d[a++]<<24)>>>0,a));a+=b;this.padding&&1===(a-this.offset&1)&&a++;this.k=a}};function E(c,d){var a=c.h[d];return a===m?u:a};function J(c,d){d=d||{};this.input=c;this.ta=d.parserOption}
J.prototype.parse=function(){var c,d,a=new D(this.input,this.ta);a.parse();1!==a.h.length&&k(Error("wrong chunk length"));a=E(a,0);a===u&&k(Error("chunk not found"));var b=this.input,e=a.offset,f;"RIFF"!==a.type&&k(Error("invalid chunk type:"+a.type));f=String.fromCharCode(b[e++],b[e++],b[e++],b[e++]);"sfbk"!==f&&k(Error("invalid signature:"+f));a=new D(b,{index:e,length:a.size-4});a.parse();3!==a.h.length&&k(Error("invalid sfbk structure"));b=E(a,0);e=this.input;f=b.offset;var g;"LIST"!==b.type&&
k(Error("invalid chunk type:"+b.type));g=String.fromCharCode(e[f++],e[f++],e[f++],e[f++]);"INFO"!==g&&k(Error("invalid signature:"+g));(new D(e,{index:f,length:b.size-4})).parse();b=E(a,1);e=this.input;f=b.offset;"LIST"!==b.type&&k(Error("invalid chunk type:"+b.type));g=String.fromCharCode(e[f++],e[f++],e[f++],e[f++]);"sdta"!==g&&k(Error("invalid signature:"+g));b=new D(e,{index:f,length:b.size-4});b.parse();1!==b.h.length&&k(Error("TODO"));this.ba=E(b,0);a=E(a,2);b=this.input;e=a.offset;"LIST"!==
a.type&&k(Error("invalid chunk type:"+a.type));f=String.fromCharCode(b[e++],b[e++],b[e++],b[e++]);"pdta"!==f&&k(Error("invalid signature:"+f));a=new D(b,{index:e,length:a.size-4});a.parse();9!==a.h.length&&k(Error("invalid pdta chunk"));b=E(a,0);e=this.input;f=b.offset;g=this.wa=[];var h=b.offset+b.size;for("phdr"!==b.type&&k(Error("invalid chunk type:"+b.type));f<h;)g.push({xa:String.fromCharCode.apply(u,e.subarray(f,f+=20)),va:e[f++]|e[f++]<<8,n:e[f++]|e[f++]<<8,Y:e[f++]|e[f++]<<8,Ja:(e[f++]|e[f++]<<
8|e[f++]<<16|e[f++]<<24)>>>0,Ha:(e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24)>>>0,Ka:(e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24)>>>0});b=E(a,1);e=this.input;f=b.offset;g=this.ya=[];h=b.offset+b.size;for("pbag"!==b.type&&k(Error("invalid chunk type:"+b.type));f<h;)g.push({Z:e[f++]|e[f++]<<8,C:e[f++]|e[f++]<<8});b=E(a,2);"pmod"!==b.type&&k(Error("invalid chunk type:"+b.type));this.aa=K(this,b);b=E(a,3);"pgen"!==b.type&&k(Error("invalid chunk type:"+b.type));this.$=L(this,b);b=E(a,4);e=this.input;f=b.offset;
g=this.b=[];h=b.offset+b.size;for("inst"!==b.type&&k(Error("invalid chunk type:"+b.type));f<h;)g.push({ka:String.fromCharCode.apply(u,e.subarray(f,f+=20)),O:e[f++]|e[f++]<<8});b=E(a,5);e=this.input;f=b.offset;g=this.la=[];h=b.offset+b.size;for("ibag"!==b.type&&k(Error("invalid chunk type:"+b.type));f<h;)g.push({P:e[f++]|e[f++]<<8,ja:e[f++]|e[f++]<<8});b=E(a,6);"imod"!==b.type&&k(Error("invalid chunk type:"+b.type));this.S=K(this,b);b=E(a,7);"igen"!==b.type&&k(Error("invalid chunk type:"+b.type));
this.R=L(this,b);h=E(a,8);a=this.input;b=h.offset;e=this.Aa=[];f=this.Ba=[];g=h.offset+h.size;var s,l,q,p,t,r,F;for("shdr"!==h.type&&k(Error("invalid chunk type:"+h.type));b<g;){h=String.fromCharCode.apply(u,a.subarray(b,b+=20));d=(a[b++]<<0|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;c=(a[b++]<<0|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;s=(a[b++]<<0|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;l=(a[b++]<<0|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;q=(a[b++]<<0|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;p=a[b++];t=a[b++]<<24>>
24;r=a[b++]|a[b++]<<8;F=a[b++]|a[b++]<<8;c=new Int16Array((new Uint8Array(a.subarray(this.ba.offset+2*d,this.ba.offset+2*c))).buffer);s-=d;l-=d;if(0<q){var x=q,C=m,A=m,I=m,G=m;for(d=1;22050>x;){C=new Int16Array(2*c.length);A=G=0;for(I=c.length;A<I;++A)C[G++]=c[A],C[G++]=c[A];c=C;d*=2;x*=2}q*=d;s*=d;l*=d}e.push(c);f.push({Ma:h,Ea:s,ha:l,sampleRate:q,ra:p,ua:t,La:r,Na:F})}this.input=u};
function K(c,d){for(var a=c.input,b=d.offset,e=d.offset+d.size,f,g,h=[];b<e;){b+=2;f=a[b++]|a[b++]<<8;g=M[f];if(g===m)h.push({type:g,value:{code:f,f:a[b]|a[b+1]<<8<<16>>16,l:a[b++],j:a[b++]}});else switch(g){case "keyRange":case "velRange":case "keynum":case "velocity":h.push({type:g,value:{l:a[b++],j:a[b++]}});break;default:h.push({type:g,value:{f:a[b++]|a[b++]<<8<<16>>16}})}b+=2;b+=2}return h}
function L(c,d){for(var a=c.input,b=d.offset,e=d.offset+d.size,f,g,h=[];b<e;)if(f=a[b++]|a[b++]<<8,g=M[f],g===m)h.push({type:g,value:{code:f,f:a[b]|a[b+1]<<8<<16>>16,l:a[b++],j:a[b++]}});else switch(g){case "keynum":case "keyRange":case "velRange":case "velocity":h.push({type:g,value:{l:a[b++],j:a[b++]}});break;default:h.push({type:g,value:{f:a[b++]|a[b++]<<8<<16>>16}})}return h}
function N(c,d,a){var b=[],e={Fa:[],keyRange:{j:127,l:0}},f;for(f=c;f<d;++f)c=a[f],b.push(c),"unknown"===c.type?e.Fa.push(c.value):e[c.type]=c.value;return{r:e,s:b}}
var M=["startAddrsOffset","endAddrsOffset","startloopAddrsOffset","endloopAddrsOffset","startAddrsCoarseOffset","modLfoToPitch","vibLfoToPitch","modEnvToPitch","initialFilterFc","initialFilterQ","modLfoToFilterFc","modEnvToFilterFc","endAddrsCoarseOffset","modLfoToVolume",,"chorusEffectsSend","reverbEffectsSend","pan",,,,"delayModLFO","freqModLFO","delayVibLFO","freqVibLFO","delayModEnv","attackModEnv","holdModEnv","decayModEnv","sustainModEnv","releaseModEnv","keynumToModEnvHold","keynumToModEnvDecay",
"delayVolEnv","attackVolEnv","holdVolEnv","decayVolEnv","sustainVolEnv","releaseVolEnv","keynumToVolEnvHold","keynumToVolEnvDecay","instrument",,"keyRange","velRange","startloopAddrsCoarseOffset","keynum","velocity","initialAttenuation",,"endloopAddrsCoarseOffset","coarseTune","fineTune","sampleID","sampleModes",,"scaleTuning","exclusiveClass","overridingRootKey"];function O(c){this.input=c;this.n=0;this.bufferSize=1024;var d;w.AudioContext!==m?d=new w.AudioContext:w.webkitAudioContext!==m?d=new w.webkitAudioContext:w.mozAudioContext!==m?d=new w.mozAudioContext:k(Error("Web Audio not supported"));d.createGainNode===m&&(d.createGainNode=d.createGain);this.d=d;this.i=this.d.createGainNode();this.ga=this.d.createDynamicsCompressor();this.v=this.d.createBufferSource();this.c=[0,1,2,3,4,5,6,7,8,0,10,11,12,13,14,15];this.K=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];this.H=
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.u=[40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40];this.p=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];this.da=1/32768;this.ma=16384;this.e=[0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0];this.o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}var ha="Acoustic Piano;Bright Piano;Electric Grand Piano;Honky-tonk Piano;Electric Piano;Electric Piano 2;Harpsichord;Clavi;Celesta;Glockenspiel;Musical box;Vibraphone;Marimba;Xylophone;Tubular Bell;Dulcimer;Drawbar Organ;Percussive Organ;Rock Organ;Church organ;Reed organ;Accordion;Harmonica;Tango Accordion;Acoustic Guitar (nylon);Acoustic Guitar (steel);Electric Guitar (jazz);Electric Guitar (clean);Electric Guitar (muted);Overdriven Guitar;Distortion Guitar;Guitar harmonics;Acoustic Bass;Electric Bass (finger);Electric Bass (pick);Fretless Bass;Slap Bass 1;Slap Bass 2;Synth Bass 1;Synth Bass 2;Violin;Viola;Cello;Double bass;Tremolo Strings;Pizzicato Strings;Orchestral Harp;Timpani;String Ensemble 1;String Ensemble 2;Synth Strings 1;Synth Strings 2;Voice Aahs;Voice Oohs;Synth Voice;Orchestra Hit;Trumpet;Trombone;Tuba;Muted Trumpet;French horn;Brass Section;Synth Brass 1;Synth Brass 2;Soprano Sax;Alto Sax;Tenor Sax;Baritone Sax;Oboe;English Horn;Bassoon;Clarinet;Piccolo;Flute;Recorder;Pan Flute;Blown Bottle;Shakuhachi;Whistle;Ocarina;Lead 1 (square);Lead 2 (sawtooth);Lead 3 (calliope);Lead 4 (chiff);Lead 5 (charang);Lead 6 (voice);Lead 7 (fifths);Lead 8 (bass + lead);Pad 1 (Fantasia);Pad 2 (warm);Pad 3 (polysynth);Pad 4 (choir);Pad 5 (bowed);Pad 6 (metallic);Pad 7 (halo);Pad 8 (sweep);FX 1 (rain);FX 2 (soundtrack);FX 3 (crystal);FX 4 (atmosphere);FX 5 (brightness);FX 6 (goblins);FX 7 (echoes);FX 8 (sci-fi);Sitar;Banjo;Shamisen;Koto;Kalimba;Bagpipe;Fiddle;Shanai;Tinkle Bell;Agogo;Steel Drums;Woodblock;Taiko Drum;Melodic Tom;Synth Drum;Reverse Cymbal;Guitar Fret Noise;Breath Noise;Seashore;Bird Tweet;Telephone Ring;Helicopter;Applause;Gunshot".split(";");
function P(c){var d;c.B=v;c.T=v;c.Ia=n;c.X=new J(c.input);c.g=Q(c);for(d=0;16>d;++d)T(c,d,9==d?0:d),U(c,d,100),V(c,d,64),c.A[d]=127,c.m(d,0,64),c.t(d,2),c.e[d]=9==d?127:0,c.o[d]=0,c.u[d]=40,W(c,d)}
function Q(c){var d,a,b,e,f;c=c.X;c.parse();var g=c.wa,h=c.ya,s=[],l,q,p,t,r;t=0;for(r=g.length;t<r;++t){l=g[t].Y;q=g[t+1]?g[t+1].Y:h.length;for(p=[];l<q;++l)f=N(h[l].Z,h[l+1]?h[l+1].Z:c.$.length,c.$),b=f.r,d=f.s,e=N(h[l].C,h[l+1]?h[l+1].C:c.aa.length,c.aa),f=e.r,e=e.s,p.push({N:b,ia:d,pa:f,qa:e}),b=b.instrument!==m?b.instrument.f:f.instrument!==m?f.instrument.f:u;s.push({name:g[t].xa,info:p,q:g[t],b:b})}h=c.b;p=c.la;g=[];r=0;for(l=h.length;r<l;++r){q=h[r].O;b=h[r+1]?h[r+1].O:p.length;t=[];for(f=
b;q<f;++q)d=N(p[q].P,p[q+1]?p[q+1].P:c.R.length,c.R),b=d.r,e=d.s,a=N(p[q].C,p[q+1]?p[q+1].ja:c.S.length,c.S),d=a.r,a=a.s,t.push({N:b,ia:e,pa:d,qa:a});g.push({name:h[r].ka,info:t})}h=[];l=0;for(q=s.length;l<q;++l)if(b=s[l],r=b.q.va,"number"===typeof b.b&&(t=g[b.b],"EOI"!==t.name.replace(/\0*$/,""))){h[b.q.n]===m&&(h[b.q.n]=[]);p=h[b.q.n];p[r]=[];p[r].name=b.name;b=0;for(f=t.info.length;b<f;++b){d=c;e=p[r];a=t.info[b].N;var F=m,x=m,C=m,A=m,I=m,G=m,aa=m,ba=m,ca=m,da=m,ea=m,R=m,S=m,H=m,fa=m;if(!(a.keyRange===
m||a.sampleID===m)){C=X(a,"attackVolEnv",-12E3);A=X(a,"decayVolEnv",-12E3);I=X(a,"sustainVolEnv");G=X(a,"releaseVolEnv",-12E3);aa=X(a,"attackModEnv",-12E3);ba=X(a,"decayModEnv",-12E3);ca=X(a,"sustainModEnv");da=X(a,"releaseModEnv",-12E3);ea=X(a,"coarseTune")+X(a,"fineTune")/100;R=X(a,"scaleTuning",100)/100;S=X(a,"freqVibLFO");H=a.keyRange.l;for(fa=a.keyRange.j;H<=fa;++H)e[H]||(F=X(a,"sampleID"),x=d.Ba[F],e[H]={sample:d.Aa[F],sampleRate:x.sampleRate,basePlaybackRate:Math.pow(Math.pow(2,1/12),(H-X(a,
"overridingRootKey",x.ra)+ea+x.ua/100)*R),modEnvToPitch:X(a,"modEnvToPitch")/100,scaleTuning:R,start:32768*X(a,"startAddrsCoarseOffset")+X(a,"startAddrsOffset"),end:32768*X(a,"endAddrsCoarseOffset")+X(a,"endAddrsOffset"),loopStart:x.Ea+32768*X(a,"startloopAddrsCoarseOffset")+X(a,"startloopAddrsOffset"),loopEnd:x.ha+32768*X(a,"endloopAddrsCoarseOffset")+X(a,"endloopAddrsOffset"),volAttack:Math.pow(2,C/1200),volDecay:Math.pow(2,A/1200),volSustain:I/1E3,volRelease:Math.pow(2,G/1200),modAttack:Math.pow(2,
aa/1200),modDecay:Math.pow(2,ba/1200),modSustain:ca/1E3,modRelease:Math.pow(2,da/1200),initialFilterFc:X(a,"initialFilterFc",13500),modEnvToFilterFc:X(a,"modEnvToFilterFc"),initialFilterQ:X(a,"initialFilterQ"),freqVibLFO:S?8.176*Math.pow(2,S/1200):m})}}}return h}function X(c,d,a){a===m&&(a=0);return c[d]?c[d].f:a}O.prototype.start=function(){this.v.connect(this.i);this.i.connect(this.d.destination);this.v.start(0);Y(this,16383)};function Y(c,d){c.ma=d;c.i.gain.value=c.da*(d/16384)}
O.prototype.stop=function(){this.v.disconnect(0);this.i.disconnect(0);this.ga.disconnect(0)};var Z=["Instrument","Vol","Pan","Bend","Range"];
function ia(c){var d=c.a=document.createElement("table"),a=document.createElement("thead"),b=document.createElement("tbody"),e,f,g;a.appendChild(ja(Z,n));for(f=0;16>f;++f){e=ja(Z.length+128,v);b.appendChild(e);if(9!==f){var h=document.createElement("select"),s;for(g=0;128>g;++g)s=document.createElement("option"),s.textContent=ha[g],h.appendChild(s);e.querySelector("td:nth-child(1)").appendChild(h);h.addEventListener("change",function(a,b){return function(c){T(a,b,c.target.selectedIndex)}}(c,f),v);
h.selectedIndex=c.c[f]}else e.querySelector("td:first-child").textContent="[ RHYTHM TRACK ]";e=e.querySelectorAll("td:nth-last-child(-n+128)");for(g=0;128>g;++g)e[g].addEventListener("mousedown",function(a,b,c){return function(d){d.preventDefault();a.L=n;a.noteOn(b,c,127)}}(c,f,g)),e[g].addEventListener("mouseover",function(a,b,c){return function(d){d.preventDefault();a.L&&a.noteOn(b,c,127)}}(c,f,g)),e[g].addEventListener("mouseout",function(a,b,c){return function(d){d.preventDefault();a.noteOff(b,
c,0)}}(c,f,g)),e[g].addEventListener("mouseup",function(a,b,c){return function(d){d.preventDefault();a.L=v;a.noteOff(b,c,0)}}(c,f,g))}d.appendChild(a);d.appendChild(b);return d}function ja(c,d){var a=document.createElement("tr"),b,e=c instanceof Array,f,g=e?c.length:c;for(f=0;f<g;++f)b=document.createElement(d?"th":"td"),b.textContent=e&&c[f]!==m?c[f]:"",a.appendChild(b);return a}
O.prototype.noteOn=function(c,d,a){var b=this.e[c];this.B?64===this.e[c]?b=125:0!==this.o[c]&&(0!==this.e[c]&&126!==this.e[c]&&127!==this.e[c])&&(b=this.o[c]):this.T||(b=0);9==c&&(b=this.B?127:128);var e=this.g[b]?this.g[b]:this.g[9==c?b:0],e=e[this.c[c]]?e[this.c[c]]:this.g[0][this.c[c]];if(this.a){var f=this.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child("+(Z.length+d+1)+")");f.classList.add("note-on");f.style.opacity=a/127}(127===b||128===b)&&(42===d||44===d)&&this.noteOff(c,46,
0);e?(e=e[d])?(b=this.H[c]-64,e.channel=c,e.key=d,e.velocity=a,e.panpot=b/(0>b?64:63),e.volume=Math.pow(this.K[c]/127*(this.A[c]/127),2),e.pitchBend=this.I[c]-8192,e.pitchBendSensitivity=this.J[c],e.reverb=this.u[c],d=new z(this.d,this.i,e),d.noteOn(),this.p[c].push(d)):w.console.warn("instrument not found: bank=%s instrument=%s channel=%s key=%s",b,this.c[c],c,d):w.console.warn("instrument not found: bank=%s instrument=%s channel=%s",b,this.c[c],c)};
O.prototype.noteOff=function(c,d){var a=this.g[9==c?127:0],b=a[this.c[c]]?a[this.c[c]]:a[0][0],e,a=this.p[c],f;this.a&&(e=this.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child("+(Z.length+d+1)+")"),e.classList.remove("note-on"),e.style.opacity=1);if(b){b=0;for(e=a.length;b<e;++b)f=a[b],f.key===d&&(f.noteOff(),a.splice(b,1),--b,--e)}};function T(c,d,a){c.a&&9!==d&&(c.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:first-child > select").selectedIndex=a);c.c[d]=a}
function U(c,d,a){c.a&&(c.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child(2)").textContent=a);c.K[d]=a}function V(c,d,a){c.a&&(c.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child(3)").textContent=a);c.H[d]=a}O.prototype.m=function(c,d,a){d=d&127|(a&127)<<7;var b,e=this.p[c],f=d-8192;this.a&&(this.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child(4)").textContent=f);a=0;for(b=e.length;a<b;++a)B(e[a],f);this.I[c]=d};
O.prototype.t=function(c,d){this.a&&(this.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child(5)").textContent=d);this.J[c]=d};function W(c,d){for(var a=c.p[d];0<a.length;)c.noteOff(d,a[0].key,0)};function $(){this.G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.na=this.onmessage.bind(this);window.addEventListener("DOMContentLoaded",function(){this.za=n}.bind(this),v)}$.prototype.Da=function(c){this.za?this.load(c):window.addEventListener("DOMContentLoaded",function a(){window.removeEventListener("DOMContentLoaded",a,v);this.load(c)}.bind(this),v)};
$.prototype.load=function(c){var d=new XMLHttpRequest;d.open("GET",c,n);d.responseType="arraybuffer";d.addEventListener("load",function(a){a=a.target;this.onload(a.response);"function"===typeof this.U&&this.U(a.response)}.bind(this),v);d.addEventListener("progress",function(a){a.lengthComputable&&(a=a.loaded/a.total,document.getElementById("message")&&(document.getElementById("message").firstChild.nodeValue="Now Loading..."+a+"%"))},v);d.send()};
$.prototype.onload=function(c){c=new Uint8Array(c);this.V(c)};$.prototype.V=function(c){var d;this.D?(d=this.D,d.input=c,d.X=new J(c),d.g=Q(d)):(d=this.D=new O(c),document.body.appendChild(ia(d)),P(d),d.start(),window.addEventListener("message",this.na,v));window.opener?window.opener.postMessage("link,ready","*"):window.parent!==window&&window.parent.postMessage("link,ready","*")};
$.prototype.onmessage=function(c){c=c.data.split(",");switch(c.shift()){case "midi":ka(this,c.map(function(c){return parseInt(c,16)}));break;case "link":c=c.shift();switch(c){case "reqpatch":window.opener?window.opener.postMessage("link,patch","*"):window.parent!==window&&window.parent.postMessage("link,patch","*");break;case "setpatch":break;default:w.console.error("unknown link message:",c)}break;default:w.console.error("unknown message type")}};$.prototype.Ca=function(c){this.U=c};
function ka(c,d){var a=d[0]&15,b=c.D;switch(d[0]&240){case 128:b.noteOff(a,d[1],d[2]);break;case 144:0<d[2]?b.noteOn(a,d[1],d[2]):b.noteOff(a,d[1],0);break;case 176:switch(d[1]){case 0:b.e[a]=d[2];break;case 6:switch(c.G[a]){case 0:switch(c.F[a]){case 0:b.t(a,d[2])}}break;case 7:U(b,a,d[2]);break;case 10:V(b,a,d[2]);break;case 11:b.A[a]=d[2];break;case 32:b.o[a]=d[2];break;case 91:b.u[a]=d[2];break;case 100:c.G[a]=d[2];break;case 101:c.F[a]=d[2];break;case 120:var e;for(e=0;127>e;++e)b.noteOff(a,
e,0);break;case 121:b.m(a,0,64);break;case 123:W(b,a)}break;case 192:T(b,a,d[1]);break;case 224:b.m(a,d[1],d[2]);break;case 240:switch(d[2]){case 67:switch(d[5]){case 0:switch(d[7]){case 4:Y(b,d[8]<<7);break;case 126:P(b),b.B=n}break;case 8:b.e[d[6]]=127}break;case 65:switch(d[8]){case 4:Y(b,d[9]<<7);break;case 127:P(b),b.T=n}break;case 126:P(b);break;case 127:switch(d[3]){case 4:switch(d[4]){case 1:Y(b,d[5]+(d[6]<<7))}}}}};y("SoundFont.WebMidiLink",$);y("SoundFont.WebMidiLink.prototype.setup",$.prototype.Da);y("SoundFont.WebMidiLink.prototype.loadSoundFont",$.prototype.V);y("SoundFont.WebMidiLink.prototype.setLoadCallback",$.prototype.Ca);}).call(this); //@ sourceMappingURL=sf2synth.min.js.map
