/** @license sf2synth.js 2013 - imaya / GREE Inc. [ https://github.com/gree/sf2synth.js ] The MIT License */(function() {'use strict';function k(b){throw b;}var l=void 0,n=!0,p=null,s=!1,w,y=this;function z(b,d){var a=b.split("."),c=y;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&d!==l?c[e]=d:c=c[e]?c[e]:c[e]={}};function C(b,d,a){this.b=b;this.destination=d;this.c=a;this.Ta=a.channel;this.key=a.key;this.Sa=a.velocity;this.buffer=a.sample;this.playbackRate=a.basePlaybackRate;this.sampleRate=a.sampleRate;this.volume=a.volume;this.ja=a.panpot;this.o=a.pitchBend;this.p=a.pitchBendSensitivity;this.Ba=a.modEnvToPitch;this.j=a.expression;this.startTime=b.currentTime;this.K=this.playbackRate;this.ia=s}w=C.prototype;
w.noteOn=function(){var b=this.b,d=this.c,a=this.buffer,c,e,f,g=this.b.currentTime,h=g+d.volDelay,t=g+d.modDelay,m=h+d.volAttack+d.volHold,q=h+d.modAttack+d.modHold,r=m+d.volDecay,u=q+d.modDecay;e=d.loopStart/this.sampleRate;f=d.loopEnd/this.sampleRate;var v=d.start/this.sampleRate,x,a=a.subarray(0,a.length+d.end);c=this.qa=b.createBuffer(1,a.length,this.sampleRate);c.getChannelData(0).set(a);a=this.U=b.createBufferSource();a.buffer=c;a.loop=1===(d.sampleModes&1);a.loopStart=e;a.loopEnd=f;F(this,
this.o);c=this.Ya=b.createPanner();e=this.L=b.createGainNode();f=e.gain;this.t=b.createGainNode();this.t.gain.value=this.j/127;b=this.filter=b.createBiquadFilter();b.type=b.LOWPASS;c.panningModel=0;c.setPosition(Math.sin(this.ja*Math.PI/2),0,Math.cos(this.ja*Math.PI/2));x=this.volume*(this.Sa/127)*(1-d.initialAttenuation/1E3);0>x&&(x=0);f.setValueAtTime(0,g);f.setValueAtTime(0,h);f.setTargetValueAtTime(x,h,d.volAttack);f.setValueAtTime(x,m);f.linearRampToValueAtTime(x*(1-d.volSustain),r);b.Q.setValueAtTime(d.initialFilterQ*
Math.pow(10,200),g);h=G(d.initialFilterFc);m=G(d.initialFilterFc+d.modEnvToFilterFc);r=h+(m-h)*(1-d.modSustain);b.frequency.setValueAtTime(h,g);b.frequency.setValueAtTime(h,t);b.frequency.setTargetValueAtTime(m,t,d.modAttack);b.frequency.setValueAtTime(m,q);b.frequency.linearRampToValueAtTime(r,u);a.connect(b);b.connect(c);c.connect(this.t);this.t.connect(e);d.mute||this.connect();a.start(0,v)};function G(b){return 440*Math.pow(2,(b-6900)/1200)}w.noteOff=function(){this.ia=n};
w.release=function(){var b=this.c,d=this.U,a=this.L,c=this.b.currentTime,e=b.releaseTime-64,e=c+b.volRelease*a.gain.value*(1+e/(0>e?64:63)),f=this.filter,g=G(b.initialFilterFc),h=G(b.initialFilterFc+b.modEnvToFilterFc),h=c+b.modRelease*(g===h?1:(f.frequency.value-g)/(h-g));if(this.qa)switch(b.sampleModes){case 1:a.gain.cancelScheduledValues(0);a.gain.setValueAtTime(a.gain.value,c);a.gain.linearRampToValueAtTime(0,e);f.frequency.cancelScheduledValues(0);f.frequency.setValueAtTime(f.frequency.value,
c);f.frequency.linearRampToValueAtTime(g,h);d.playbackRate.cancelScheduledValues(0);d.playbackRate.setValueAtTime(d.playbackRate.value,c);d.playbackRate.linearRampToValueAtTime(this.K,h);d.stop(e);break;case 2:y.console.log("detect unused sampleModes");break;case 3:d.loop=s}};w.connect=function(){this.L.connect(this.destination)};w.disconnect=function(){this.L.disconnect(0)};
function F(b,d){b.K=b.playbackRate*Math.pow(Math.pow(2,1/12),d/(0>d?8192:8191)*b.p*b.c.scaleTuning);var a=b.U.playbackRate,c=b.K,e=b.startTime,f=b.c,g=e+f.modAttack,h=g+f.modDecay,t=c*Math.pow(Math.pow(2,1/12),b.Ba*b.c.scaleTuning);a.cancelScheduledValues(0);a.setValueAtTime(c,e);a.linearRampToValueAtTime(t,g);a.linearRampToValueAtTime(c+(t-c)*(1-f.modSustain),h)};function H(b,d){d=d||{};this.input=b;this.l=d.index||0;this.length=d.length||b.length-this.l;this.offset=this.l;this.padding=d.padding!==l?d.padding:n;this.sa=d.bigEndian!==l?d.bigEndian:s}function aa(b,d,a){this.type=b;this.size=d;this.offset=a}
H.prototype.parse=function(){var b=this.length+this.offset;for(this.f=[];this.l<b;){var d=this.input,a=this.l,c=l;this.f.push(new aa(String.fromCharCode(d[a++],d[a++],d[a++],d[a++]),c=this.sa?(d[a++]<<24|d[a++]<<16|d[a++]<<8|d[a++])>>>0:(d[a++]|d[a++]<<8|d[a++]<<16|d[a++]<<24)>>>0,a));a+=c;this.padding&&1===(a-this.offset&1)&&a++;this.l=a}};function I(b,d){var a=b.f[d];return a===l?p:a};function L(b,d){d=d||{};this.input=b;this.Fa=d.parserOption}
L.prototype.parse=function(){var b,d,a=new H(this.input,this.Fa);a.parse();1!==a.f.length&&k(Error("wrong chunk length"));a=I(a,0);a===p&&k(Error("chunk not found"));var c=this.input,e=a.offset,f;"RIFF"!==a.type&&k(Error("invalid chunk type:"+a.type));f=String.fromCharCode(c[e++],c[e++],c[e++],c[e++]);"sfbk"!==f&&k(Error("invalid signature:"+f));a=new H(c,{index:e,length:a.size-4});a.parse();3!==a.f.length&&k(Error("invalid sfbk structure"));c=I(a,0);e=this.input;f=c.offset;var g;"LIST"!==c.type&&
k(Error("invalid chunk type:"+c.type));g=String.fromCharCode(e[f++],e[f++],e[f++],e[f++]);"INFO"!==g&&k(Error("invalid signature:"+g));(new H(e,{index:f,length:c.size-4})).parse();c=I(a,1);e=this.input;f=c.offset;"LIST"!==c.type&&k(Error("invalid chunk type:"+c.type));g=String.fromCharCode(e[f++],e[f++],e[f++],e[f++]);"sdta"!==g&&k(Error("invalid signature:"+g));c=new H(e,{index:f,length:c.size-4});c.parse();1!==c.f.length&&k(Error("TODO"));this.pa=I(c,0);a=I(a,2);c=this.input;e=a.offset;"LIST"!==
a.type&&k(Error("invalid chunk type:"+a.type));f=String.fromCharCode(c[e++],c[e++],c[e++],c[e++]);"pdta"!==f&&k(Error("invalid signature:"+f));a=new H(c,{index:e,length:a.size-4});a.parse();9!==a.f.length&&k(Error("invalid pdta chunk"));c=I(a,0);e=this.input;f=c.offset;g=this.Ia=[];var h=c.offset+c.size;for("phdr"!==c.type&&k(Error("invalid chunk type:"+c.type));f<h;)g.push({Ja:String.fromCharCode.apply(p,e.subarray(f,f+=20)),Ha:e[f++]|e[f++]<<8,s:e[f++]|e[f++]<<8,la:e[f++]|e[f++]<<8,Wa:(e[f++]|e[f++]<<
8|e[f++]<<16|e[f++]<<24)>>>0,Va:(e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24)>>>0,Xa:(e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24)>>>0});c=I(a,1);e=this.input;f=c.offset;g=this.Ka=[];h=c.offset+c.size;for("pbag"!==c.type&&k(Error("invalid chunk type:"+c.type));f<h;)g.push({ma:e[f++]|e[f++]<<8,O:e[f++]|e[f++]<<8});c=I(a,2);"pmod"!==c.type&&k(Error("invalid chunk type:"+c.type));this.oa=M(this,c);c=I(a,3);"pgen"!==c.type&&k(Error("invalid chunk type:"+c.type));this.na=N(this,c);c=I(a,4);e=this.input;f=c.offset;
g=this.c=[];h=c.offset+c.size;for("inst"!==c.type&&k(Error("invalid chunk type:"+c.type));f<h;)g.push({wa:String.fromCharCode.apply(p,e.subarray(f,f+=20)),ca:e[f++]|e[f++]<<8});c=I(a,5);e=this.input;f=c.offset;g=this.xa=[];h=c.offset+c.size;for("ibag"!==c.type&&k(Error("invalid chunk type:"+c.type));f<h;)g.push({da:e[f++]|e[f++]<<8,va:e[f++]|e[f++]<<8});c=I(a,6);"imod"!==c.type&&k(Error("invalid chunk type:"+c.type));this.fa=M(this,c);c=I(a,7);"igen"!==c.type&&k(Error("invalid chunk type:"+c.type));
this.ea=N(this,c);h=I(a,8);a=this.input;c=h.offset;e=this.Ma=[];f=this.Na=[];g=h.offset+h.size;var t,m,q,r,u,v,x;for("shdr"!==h.type&&k(Error("invalid chunk type:"+h.type));c<g;){h=String.fromCharCode.apply(p,a.subarray(c,c+=20));d=(a[c++]<<0|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0;b=(a[c++]<<0|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0;t=(a[c++]<<0|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0;m=(a[c++]<<0|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0;q=(a[c++]<<0|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0;r=a[c++];u=a[c++]<<24>>
24;v=a[c++]|a[c++]<<8;x=a[c++]|a[c++]<<8;b=new Int16Array((new Uint8Array(a.subarray(this.pa.offset+2*d,this.pa.offset+2*b))).buffer);t-=d;m-=d;if(0<q){var A=q,E=l,D=l,K=l,J=l;for(d=1;22050>A;){E=new Int16Array(2*b.length);D=J=0;for(K=b.length;D<K;++D)E[J++]=b[D],E[J++]=b[D];b=E;d*=2;A*=2}q*=d;t*=d;m*=d}e.push(b);f.push({$a:h,Qa:t,ta:m,sampleRate:q,Ea:r,Ga:u,Za:v,ab:x})}this.input=p};
function M(b,d){for(var a=b.input,c=d.offset,e=d.offset+d.size,f,g,h=[];c<e;){c+=2;f=a[c++]|a[c++]<<8;g=O[f];if(g===l)h.push({type:g,value:{code:f,e:a[c]|a[c+1]<<8<<16>>16,m:a[c++],k:a[c++]}});else switch(g){case "keyRange":case "velRange":case "keynum":case "velocity":h.push({type:g,value:{m:a[c++],k:a[c++]}});break;default:h.push({type:g,value:{e:a[c++]|a[c++]<<8<<16>>16}})}c+=2;c+=2}return h}
function N(b,d){for(var a=b.input,c=d.offset,e=d.offset+d.size,f,g,h=[];c<e;)if(f=a[c++]|a[c++]<<8,g=O[f],g===l)h.push({type:g,value:{code:f,e:a[c]|a[c+1]<<8<<16>>16,m:a[c++],k:a[c++]}});else switch(g){case "keynum":case "keyRange":case "velRange":case "velocity":h.push({type:g,value:{m:a[c++],k:a[c++]}});break;default:h.push({type:g,value:{e:a[c++]|a[c++]<<8<<16>>16}})}return h}
function P(b,d,a){var c=[],e={Ra:[],keyRange:{k:127,m:0}},f;for(f=b;f<d;++f)b=a[f],c.push(b),"unknown"===b.type?e.Ra.push(b.value):e[b.type]=b.value;return{v:e,w:c}}
var O=["startAddrsOffset","endAddrsOffset","startloopAddrsOffset","endloopAddrsOffset","startAddrsCoarseOffset","modLfoToPitch","vibLfoToPitch","modEnvToPitch","initialFilterFc","initialFilterQ","modLfoToFilterFc","modEnvToFilterFc","endAddrsCoarseOffset","modLfoToVolume",,"chorusEffectsSend","reverbEffectsSend","pan",,,,"delayModLFO","freqModLFO","delayVibLFO","freqVibLFO","delayModEnv","attackModEnv","holdModEnv","decayModEnv","sustainModEnv","releaseModEnv","keynumToModEnvHold","keynumToModEnvDecay",
"delayVolEnv","attackVolEnv","holdVolEnv","decayVolEnv","sustainVolEnv","releaseVolEnv","keynumToVolEnvHold","keynumToVolEnvDecay","instrument",,"keyRange","velRange","startloopAddrsCoarseOffset","keynum","velocity","initialAttenuation",,"endloopAddrsCoarseOffset","coarseTune","fineTune","sampleID","sampleModes",,"scaleTuning","exclusiveClass","overridingRootKey"];function Q(b){var d;this.input=b;this.s=0;this.bufferSize=1024;this.b=R();this.g=this.b.createGainNode();this.F=this.b.createBufferSource();this.i=[0,1,2,3,4,5,6,7,8,0,10,11,12,13,14,15];this.$=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];this.X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.H=[127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127];this.Z=[64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64];this.I=[s,s,s,s,s,s,
s,s,s,s,s,s,s,s,s,s];this.V=[0,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0];this.Ua=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.N=this.M=s;this.W=[s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s];this.d=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];this.ra=1/65535;this.za=16384;this.n=Array(128);b=0;for(d=this.n.length;b<d;++b)this.n[b]=127;this.ya=ba;this.P=n;this.r=this.b.createConvolver();this.q=this.b.createGainNode()}
function R(){var b;y.AudioContext!==l?b=new y.AudioContext:y.webkitAudioContext!==l?b=new y.webkitAudioContext:y.mozAudioContext!==l?b=new y.mozAudioContext:k(Error("Web Audio not supported"));b.createGainNode===l&&(b.createGainNode=b.createGain);return b}var ma="Acoustic Piano;Bright Piano;Electric Grand Piano;Honky-tonk Piano;Electric Piano;Electric Piano 2;Harpsichord;Clavi;Celesta;Glockenspiel;Musical box;Vibraphone;Marimba;Xylophone;Tubular Bell;Dulcimer;Drawbar Organ;Percussive Organ;Rock Organ;Church organ;Reed organ;Accordion;Harmonica;Tango Accordion;Acoustic Guitar (nylon);Acoustic Guitar (steel);Electric Guitar (jazz);Electric Guitar (clean);Electric Guitar (muted);Overdriven Guitar;Distortion Guitar;Guitar harmonics;Acoustic Bass;Electric Bass (finger);Electric Bass (pick);Fretless Bass;Slap Bass 1;Slap Bass 2;Synth Bass 1;Synth Bass 2;Violin;Viola;Cello;Double bass;Tremolo Strings;Pizzicato Strings;Orchestral Harp;Timpani;String Ensemble 1;String Ensemble 2;Synth Strings 1;Synth Strings 2;Voice Aahs;Voice Oohs;Synth Voice;Orchestra Hit;Trumpet;Trombone;Tuba;Muted Trumpet;French horn;Brass Section;Synth Brass 1;Synth Brass 2;Soprano Sax;Alto Sax;Tenor Sax;Baritone Sax;Oboe;English Horn;Bassoon;Clarinet;Piccolo;Flute;Recorder;Pan Flute;Blown Bottle;Shakuhachi;Whistle;Ocarina;Lead 1 (square);Lead 2 (sawtooth);Lead 3 (calliope);Lead 4 (chiff);Lead 5 (charang);Lead 6 (voice);Lead 7 (fifths);Lead 8 (bass + lead);Pad 1 (Fantasia);Pad 2 (warm);Pad 3 (polysynth);Pad 4 (choir);Pad 5 (bowed);Pad 6 (metallic);Pad 7 (halo);Pad 8 (sweep);FX 1 (rain);FX 2 (soundtrack);FX 3 (crystal);FX 4 (atmosphere);FX 5 (brightness);FX 6 (goblins);FX 7 (echoes);FX 8 (sci-fi);Sitar;Banjo;Shamisen;Koto;Kalimba;Bagpipe;Fiddle;Shanai;Tinkle Bell;Agogo;Steel Drums;Woodblock;Taiko Drum;Melodic Tom;Synth Drum;Reverse Cymbal;Guitar Fret Noise;Breath Noise;Seashore;Bird Tweet;Telephone Ring;Helicopter;Applause;Gunshot".split(";");
function U(b){var d;b.ka=new L(b.input);b.D=V(b);b.r.buffer=b.ya;b.q.gain.value=1;b.N=s;b.M=s;for(d=0;16>d;++d)W(b,d,d),na(b,d,100),oa(b,d,64),b.o(d,0,64),b.p(d,2),b.I[d]=s,b.H[d]=127;for(d=0;128>d;++d)b.n[d]=127}
function V(b){var d,a,c,e,f;b=b.ka;b.parse();var g=b.Ia,h=b.Ka,t=[],m,q,r,u,v;u=0;for(v=g.length;u<v;++u){m=g[u].la;q=g[u+1]?g[u+1].la:h.length;for(r=[];m<q;++m)f=P(h[m].ma,h[m+1]?h[m+1].ma:b.na.length,b.na),c=f.v,d=f.w,e=P(h[m].O,h[m+1]?h[m+1].O:b.oa.length,b.oa),f=e.v,e=e.w,r.push({ba:c,ua:d,Ca:f,Da:e}),c=c.instrument!==l?c.instrument.e:f.instrument!==l?f.instrument.e:p;t.push({name:g[u].Ja,info:r,u:g[u],c:c})}h=b.c;r=b.xa;g=[];v=0;for(m=h.length;v<m;++v){q=h[v].ca;c=h[v+1]?h[v+1].ca:r.length;u=
[];for(f=c;q<f;++q)d=P(r[q].da,r[q+1]?r[q+1].da:b.ea.length,b.ea),c=d.v,e=d.w,a=P(r[q].O,r[q+1]?r[q+1].va:b.fa.length,b.fa),d=a.v,a=a.w,u.push({ba:c,ua:e,Ca:d,Da:a});g.push({name:h[v].wa,info:u})}h=[];m=0;for(q=t.length;m<q;++m)if(c=t[m],v=c.u.Ha,"number"===typeof c.c&&(u=g[c.c],"EOI"!==u.name.replace(/\0*$/,""))){h[c.u.s]===l&&(h[c.u.s]=[]);r=h[c.u.s];r[v]=[];r[v].name=c.name;c=0;for(f=u.info.length;c<f;++c){d=b;e=r[v];a=u.info[c].ba;var x=l,A=l,E=l,D=l,K=l,J=l,ca=l,da=l,ea=l,fa=l,ga=l,ha=l,ia=l,
ja=l,ka=l,S=l,T=l,B=l,la=l;if(!(a.keyRange===l||a.sampleID===l)){E=X(a,"delayVolEnv",-12E3);D=X(a,"attackVolEnv",-12E3);K=X(a,"holdVolEnv",-12E3);J=X(a,"decayVolEnv",-12E3);ca=X(a,"sustainVolEnv");da=X(a,"releaseVolEnv",-12E3);ea=X(a,"delayModEnv",-12E3);fa=X(a,"attackModEnv",-12E3);ga=X(a,"holdModEnv",-12E3);ha=X(a,"decayModEnv",-12E3);ia=X(a,"sustainModEnv");ja=X(a,"releaseModEnv",-12E3);ka=X(a,"coarseTune")+X(a,"fineTune")/100;S=X(a,"scaleTuning",100)/100;T=X(a,"freqVibLFO");B=a.keyRange.m;for(la=
a.keyRange.k;B<=la;++B)e[B]||(x=X(a,"sampleID"),A=d.Na[x],e[B]={sample:d.Ma[x],sampleRate:A.sampleRate,sampleModes:X(a,"sampleModes"),basePlaybackRate:Math.pow(Math.pow(2,1/12),(B-X(a,"overridingRootKey",A.Ea)+ka+A.Ga/100)*S),modEnvToPitch:X(a,"modEnvToPitch")/100,scaleTuning:S,start:32768*X(a,"startAddrsCoarseOffset")+X(a,"startAddrsOffset"),end:32768*X(a,"endAddrsCoarseOffset")+X(a,"endAddrsOffset"),loopStart:A.Qa+32768*X(a,"startloopAddrsCoarseOffset")+X(a,"startloopAddrsOffset"),loopEnd:A.ta+
32768*X(a,"endloopAddrsCoarseOffset")+X(a,"endloopAddrsOffset"),volDelay:Math.pow(2,E/1200),volAttack:Math.pow(2,D/1200),volHold:Math.pow(2,K/1200)*Math.pow(2,(60-B)*X(a,"keynumToVolEnvHold")/1200),volDecay:Math.pow(2,J/1200)*Math.pow(2,(60-B)*X(a,"keynumToVolEnvDecay")/1200),volSustain:ca/1E3,volRelease:Math.pow(2,da/1200),modDelay:Math.pow(2,ea/1200),modAttack:Math.pow(2,fa/1200),modHold:Math.pow(2,ga/1200)*Math.pow(2,(60-B)*X(a,"keynumToModEnvHold")/1200),modDecay:Math.pow(2,ha/1200)*Math.pow(2,
(60-B)*X(a,"keynumToModEnvDecay")/1200),modSustain:ia/1E3,modRelease:Math.pow(2,ja/1200),initialFilterFc:X(a,"initialFilterFc",13500),modEnvToFilterFc:X(a,"modEnvToFilterFc"),initialFilterQ:X(a,"initialFilterQ"),reverbEffectSend:X(a,"reverbEffectSend"),initialAttenuation:X(a,"initialAttenuation"),freqVibLFO:T?8.176*Math.pow(2,T/1200):l})}}}return h}function X(b,d,a){a===l&&(a=0);return b[d]?b[d].e:a}
var ba=R().createBuffer(function(b){var d,a=b.length,c=new Uint8Array(a);for(d=0;d<a;++d)c[d]=b.charCodeAt(d);return c}(window.atob("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")).buffer,
s);Q.prototype.connect=function(){this.F.connect(this.g);this.g.connect(this.b.destination);this.P&&pa(this)};function pa(b){b.g.connect(b.r);b.r.connect(b.q);b.q.connect(b.b.destination)}Q.prototype.start=function(){this.connect();this.F.start(0);Y(this,16383)};function Y(b,d){b.za=d;b.g.gain.value=b.ra*(d/16384)}Q.prototype.stop=Q.prototype.disconnect=function(){this.F.disconnect(0);this.g.disconnect(0);this.r.disconnect(0);this.q.disconnect(0)};
Q.prototype.R=function(b){this.P!==b&&(this.r.disconnect(0),this.q.disconnect(0),(this.P=b)&&pa(this))};var Z=["Instrument","Vol","Pan","Bend","Range"];
function qa(b){var d=b.a=document.createElement("table"),a=document.createElement("thead"),c=document.createElement("tbody"),e,f,g,h,t,m;a.appendChild(ra(Z,n));for(m=0;16>m;++m){e=ra(Z.length+128,s);c.appendChild(e);f=e.querySelector("td:nth-child(1)");g=document.createElement("input");g.setAttribute("type","checkbox");g.addEventListener("change",function(a,b){return function(){var c=this.checked,d=a.d[b],e;if(a.W[b]=c){c=0;for(e=d.length;c<e;++c)d[c].disconnect()}else{c=0;for(e=d.length;c<e;++c)d[c].connect()}}}(b,
m),s);f.appendChild(g);if(9!==m){h=document.createElement("select");for(g=0;128>g;++g)t=document.createElement("option"),t.textContent=ma[g],h.appendChild(t);f.appendChild(h);h.addEventListener("change",function(a,b){return function(c){W(a,b,c.target.selectedIndex)}}(b,m),s);h.selectedIndex=b.i[m]}else f.appendChild(document.createTextNode("[ RHYTHM TRACK ]"));e=e.querySelectorAll("td:nth-last-child(-n+128)");for(g=0;128>g;++g)e[g].addEventListener("mousedown",function(a,b,c){return function(d){d.preventDefault();
a.aa=n;a.noteOn(b,c,127)}}(b,m,g)),e[g].addEventListener("mouseover",function(a,b,c){return function(d){d.preventDefault();a.aa&&a.noteOn(b,c,127)}}(b,m,g)),e[g].addEventListener("mouseout",function(a,b,c){return function(d){d.preventDefault();a.noteOff(b,c,0)}}(b,m,g)),e[g].addEventListener("mouseup",function(a,b,c){return function(d){d.preventDefault();a.aa=s;a.noteOff(b,c,0)}}(b,m,g))}d.appendChild(a);d.appendChild(c);return d}
function ra(b,d){var a=document.createElement("tr"),c,e=b instanceof Array,f,g=e?b.length:b;for(f=0;f<g;++f)c=document.createElement(d?"th":"td"),c.textContent=e&&b[f]!==l?b[f]:"",a.appendChild(c);return a}w=Q.prototype;
w.noteOn=function(b,d,a){var c=this.V[b],e=this.D[c],f=e[this.i[b]];this.a&&this.a.querySelector("tbody > tr:nth-child("+(b+1)+") > td:nth-child("+(Z.length+d+1)+")").classList.add("note-on");f||(f=e[c]);(e=f[d]||e[0])?(c=this.X[b]-64,e.channel=b,e.key=d,e.velocity=a,e.panpot=c/(0>c?64:63),e.volume=this.$[b]/127,e.pitchBend=this.Y[b]-8192,e.expression=this.H[b],e.pitchBendSensitivity=this.J[b],e.mute=this.W[b],e.releaseTime=this.Z[b],9===b&&(f.volume*=this.n[d]/127),d=new C(this.b,this.g,e),d.noteOn(),
this.d[b].push(d)):y.console.warn("instrument not found: bank=%s instrument=%s channel=%s key=%s",c,this.i[b],b,d)};w.noteOff=function(b,d){var a=this.D[this.V[b]][this.i[b]],c,e=this.d[b],f,g=this.I[b];this.a&&this.a.querySelector("tbody > tr:nth-child("+(b+1)+") > td:nth-child("+(d+Z.length+1)+")").classList.remove("note-on");if(a){a=0;for(c=e.length;a<c;++a)f=e[a],f.key===d&&(f.noteOff(),g||(f.release(),e.splice(a,1),--a,--c))}};
function sa(b,d,a){var c=b.d[d];if(!(b.I[d]=!(64>a))){d=0;for(a=c.length;d<a;++d)b=c[d],b.ia&&(b.release(),c.splice(d,1),--d,--a)}}function W(b,d,a){b.a&&9!==d&&(b.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:first-child > select").selectedIndex=a);9===d&&!b.N&&!b.M||(b.i[d]=a)}function na(b,d,a){b.a&&(b.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child(2)").textContent=a);b.$[d]=a}
w.j=function(b,d){var a,c,e=this.d[b];a=0;for(c=e.length;a<c;++a){var f=e[a];f.t.gain.value=(f.j=d)/127}this.H[b]=d};function oa(b,d,a){b.a&&(b.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child(3)").textContent=a);b.X[d]=a}w.o=function(b,d,a){d=d&127|(a&127)<<7;var c,e=this.d[b],f=d-8192;this.a&&(this.a.querySelector("tbody > tr:nth-child("+(b+1)+") > td:nth-child(4)").textContent=f);a=0;for(c=e.length;a<c;++a)F(e[a],f);this.Y[b]=d};
w.p=function(b,d){this.a&&(this.a.querySelector("tbody > tr:nth-child("+(b+1)+") > td:nth-child(5)").textContent=d);this.J[b]=d};function $(){this.T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Aa=this.onmessage.bind(this);this.h=n;window.addEventListener("DOMContentLoaded",function(){this.La=n}.bind(this),s)}w=$.prototype;w.Pa=function(b){this.La?this.load(b):window.addEventListener("DOMContentLoaded",function a(){window.removeEventListener("DOMContentLoaded",a,s);this.load(b)}.bind(this),s)};
w.load=function(b){var d;this.G();d=this.A=new XMLHttpRequest;d.open("GET",b,n);d.responseType="arraybuffer";d.addEventListener("load",function(a){a=a.target;this.onload(a.response);"function"===typeof this.ga&&this.ga(a.response);this.A=p}.bind(this),s);d.send()};w.R=function(b){this.z.R(b)};w.G=function(){this.A&&(this.A.abort(),this.A=p)};w.onload=function(b){b=new Uint8Array(b);this.ha(b)};
w.ha=function(b){var d;this.G();this.z?(d=this.z,d.input=b,d.ka=new L(b),d.D=V(d)):(d=this.z=new Q(b),document.body.appendChild(qa(d)),U(d),d.start(),window.addEventListener("message",this.Aa,s));window.opener?window.opener.postMessage("link,ready","*"):window.parent!==window&&window.parent.postMessage("link,ready","*")};
w.onmessage=function(b){b=b.data.split(",");switch(b.shift()){case "midi":ta(this,b.map(function(b){return parseInt(b,16)}));break;case "link":b=b.shift();switch(b){case "reqpatch":window.opener?window.opener.postMessage("link,patch","*"):window.parent!==window&&window.parent.postMessage("link,patch","*");break;case "setpatch":break;default:y.console.error("unknown link message:",b)}break;default:y.console.error("unknown message type")}};w.Oa=function(b){this.ga=b};
function ta(b,d){var a=d[0]&15,c=b.z;switch(d[0]&240){case 128:c.noteOff(a,d[1],d[2]);break;case 144:0<d[2]?c.noteOn(a,d[1],d[2]):c.noteOff(a,d[1],0);break;case 176:switch(d[1]){case 6:if(b.h)switch(b.C[a]){case 0:switch(b.B[a]){case 0:c.p(a,d[2])}}else switch(b.T[a]){case 26:c.n[b.S[a]]=d[2]}break;case 38:if(b.h)switch(b.C[a]){case 0:switch(b.B[a]){case 0:c.p(a,c.J[a]+d[2]/100)}}break;case 7:na(c,a,d[2]);break;case 10:oa(c,a,d[2]);break;case 120:for(var e=c.d[a],f;0<e.length;)f=e.shift(),c.noteOff(a,
f.key,0),f.release(),f.disconnect();break;case 121:c.j(a,127);c.o(a,0,64);sa(c,a,0);break;case 98:b.h=s;b.S[a]=d[2];break;case 99:b.h=s;b.T[a]=d[2];break;case 100:b.h=n;b.B[a]=d[2];break;case 101:b.h=n;b.C[a]=d[2];break;case 64:sa(c,a,d[2]);break;case 11:c.j(a,d[2]);break;case 74:c.Z[a]=d[2]}break;case 192:W(c,a,d[1]);break;case 224:c.o(a,d[1],d[2]);break;case 240:switch(d[1]){case 126:127===d[2]&&(9===d[3]&&1===d[4])&&U(c);break;case 127:switch(d[3]){case 4:switch(d[4]){case 1:Y(c,d[5]+(d[6]<<7))}}}switch(d[2]){case 67:switch(d[7]){case 4:Y(c,
d[8]<<7);break;case 126:U(c),c.N=n}break;case 65:switch(d[8]){case 4:Y(c,d[9]<<7);break;case 127:U(c),c.M=n}}}};z("SoundFont.WebMidiLink",$);z("SoundFont.WebMidiLink.prototype.setup",$.prototype.Pa);z("SoundFont.WebMidiLink.prototype.loadSoundFont",$.prototype.ha);z("SoundFont.WebMidiLink.prototype.cancelLoading",$.prototype.G);z("SoundFont.WebMidiLink.prototype.setLoadCallback",$.prototype.Oa);z("SoundFont.WebMidiLink.prototype.setReverb",$.prototype.R);}).call(this); //@ sourceMappingURL=sf2synth.min.js.map
